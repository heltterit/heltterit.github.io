(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t){e.exports="data:image/png;base64,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"},337:function(e,t,a){e.exports=a(685)},342:function(e,t,a){},685:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(28),r=a.n(o),l=a(687),c=a(686),s=(a(342),a(39)),u=a(21),d=a(34),m=a(40),h=a(42),g=a(41),v=a(43),p=a(688),f=a(20),E=a.n(f),y=a(3),b=a(19),k=a(102),A=a.n(k),T=a(276),C=function(e){var t=e.data;return i.a.createElement(T.ResponsiveLine,{data:function(e){var t=[],a={id:"",data:[]};return e.reverse().forEach(function(e){var n=e.month.split("-")[0],i=parseInt(e.month.split("-")[1]);a.id!==n&&(a={id:n,data:[]},t.push(a));var o={x:["tam","hel","maa","huh","tou","kes","hei","elo","syy","lok","mar","jou"].find(function(e,t){return i-1===t})||"",y:parseInt(e.count)};a.data.push(o)}),t}(t),margin:{top:50,right:110,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",stacked:!1,min:"auto",max:"auto"},axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"kuukausi",legendOffset:36,legendPosition:"middle"},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"kpl",legendOffset:-40,legendPosition:"middle"},markers:[{axis:"y",value:100,lineStyle:{strokeDasharray:2}},{axis:"y",value:200,lineStyle:{strokeDasharray:2}},{axis:"y",value:300,lineStyle:{strokeDasharray:2}}],curve:"linear",dotSize:10,dotColor:"inherit:darker(0.3)",dotBorderWidth:2,dotBorderColor:"#ffffff",enableDotLabel:!1,animate:!0,motionStiffness:90,motionDamping:15,legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]})},S=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(i)))).state={totalHits:0,monthlyHits:[],loading:!1},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0},function(){var t=[];t.push(E.a.database().ref("counters/all-hits-index").once("value").then(function(t){e.setState({totalHits:t.val()})})),t.push(E.a.database().ref("counters/monthly-hits-index").once("value").then(function(t){var a=t.val(),n=Object.keys(a).map(function(e){return{month:e,count:a[e]}});e.setState({monthlyHits:n})})),Promise.all(t).then(function(){e.setState({loading:!1})})})}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.totalHits,n=t.monthlyHits;if(t.loading)return i.a.createElement(y.d,{className:e.loading});var o=n.sort(function(e,t){return e.month<t.month?1:e.month>t.month?-1:0});return i.a.createElement("div",{className:e.root},i.a.createElement(i.a.Fragment,null,i.a.createElement(y.A,{className:e.allHits,variant:"subtitle1"},"K\xe4vij\xe4t etusivulla yhteens\xe4 ",a," kpl"),i.a.createElement("div",{className:e.graph},i.a.createElement(C,{data:o})),i.a.createElement(y.s,null,i.a.createElement(y.v,null,i.a.createElement(y.w,null,i.a.createElement(y.u,null,"Kuukausi"),i.a.createElement(y.u,null,"K\xe4vij\xe4t"))),i.a.createElement(y.t,null,o.map(function(e){return i.a.createElement(y.w,{key:e.month},i.a.createElement(y.u,null,e.month),i.a.createElement(y.u,null,e.count))})))))}}]),t}(n.Component),j=Object(b.withStyles)(function(e){return{root:{flexGrow:1},allHits:{padding:2*e.spacing.unit,paddingLeft:3*e.spacing.unit},loading:{marginTop:2*e.spacing.unit,marginLeft:2*e.spacing.unit},graph:{height:"300px",width:"100%"}}},{withTheme:!0})(S),w=a(103),O=a.n(w),x=a(172),U=a.n(x),D=a(57),N=a.n(D),I=Object(b.withStyles)(function(e){return{root:{backgroundColor:e.palette.background.default}}})(function(e){var t=e.classes,a=e.show,n=e.data,o=e.onSave,r=e.onCancel,l=e.onFieldChange,c=e.onDelete;if(!n)return null;var s=null;return n.id&&(s=i.a.createElement(y.c,{variant:"text",color:"secondary",onClick:c},"Poista")),i.a.createElement(y.f,{PaperProps:{classes:{root:t.root}},open:a,fullScreen:!0,maxWidth:"sm"},i.a.createElement(y.i,null,"Keikan tiedot"),i.a.createElement(y.h,null,i.a.createElement(y.o,{elevation:1,style:{padding:"10px"}},i.a.createElement(y.A,{variant:"h6"},"Keikkap\xe4iv\xe4 *"),i.a.createElement(y.y,{name:"eventDate",label:"",type:"date",fullWidth:!0,value:n.eventDate||"",onChange:function(e){return l(e.target.name,e.target.value)}})),i.a.createElement(y.o,{elevation:1,style:{padding:"10px",marginTop:"10px"}},i.a.createElement(y.A,{variant:"h6"},"Keikan tyyppi *"),i.a.createElement("div",null,i.a.createElement(y.q,{name:"eventType",onChange:function(e){return l(e.target.name,e.target.value)},value:n.eventType},i.a.createElement(y.j,{control:i.a.createElement(y.p,null),checked:"electric"===n.eventType||!n.eventType,value:"electric",label:"S\xe4hk\xf6inen"}),i.a.createElement(y.j,{control:i.a.createElement(y.p,null),checked:"acoustic"===n.eventType,value:"acoustic",label:"Akustinen"})))),i.a.createElement(y.o,{elevation:1,style:{padding:"10px",marginTop:"10px"}},i.a.createElement(y.A,{variant:"h6"},"Keikkapaikka"),i.a.createElement(y.y,{name:"venueName",label:"Paikka tai 'Private' *",fullWidth:!0,value:n.venueName,onChange:function(e){return l(e.target.name,e.target.value)}}),i.a.createElement(y.y,{name:"venueAddress",label:"Katuosoite",fullWidth:!0,value:n.venueAddress,onChange:function(e){return l(e.target.name,e.target.value)}}),i.a.createElement(y.y,{name:"venueCity",label:"Kaupunki *",fullWidth:!0,value:n.venueCity,onChange:function(e){return l(e.target.name,e.target.value)}})),i.a.createElement(y.o,{elevation:1,style:{padding:"10px",marginTop:"10px",marginBottom:"10px"}},i.a.createElement(y.A,{variant:"h6"},"Lis\xe4tiedot"),i.a.createElement(y.y,{name:"desc",label:"Lis\xe4tiedot",fullWidth:!0,value:n.desc,onChange:function(e){return l(e.target.name,e.target.value)}}),i.a.createElement(y.y,{name:"venueUrl",label:"Nettiosoite",type:"url",fullWidth:!0,value:n.venueUrl,onChange:function(e){return l(e.target.name,e.target.value)}}))),i.a.createElement(y.g,null,s,i.a.createElement(y.c,{variant:"contained",color:"default",onClick:r},"Keskeyt\xe4"),i.a.createElement(y.c,{variant:"contained",color:"primary",onClick:o,disabled:""===n.eventDate||""===n.venueName||""===n.venueCity},"Tallenna")))}),q=a(278),P=function(e){var t=e.data;return i.a.createElement(q.ResponsiveBar,{margin:{top:50,right:50,bottom:50,left:50},data:function(e){var t=Array.from(new Set(e.map(function(e){return e.eventType}))),a={};return e.forEach(function(e){var n=e.eventDate.substr(0,4),i={};a[n]?i=a[n]:(i={year:n},t.forEach(function(e){i[e]=0}),a[n]=i),i[e.eventType]+=1}),Object.keys(a).map(function(e){return Object(u.a)({},a[e])})}(t),indexBy:"year",keys:["electric","acoustic"],padding:.2,labelTextColor:"inherit:darker(1.4)",labelSkipWidth:16,labelSkipHeight:16})},H=function e(t){Object(d.a)(this,e),this.id=void 0,this.desc="",this.eventDate=function(e){var t=e.getFullYear().toString(),a=(e.getMonth()+1).toString(),n=e.getDate().toString();return 1===a.length&&(a="0".concat(a)),1===n.length&&(n="0".concat(n)),"".concat(t,"-").concat(a,"-").concat(n)}(new Date),this.eventType="electric",this.venueAddress="",this.venueCity="",this.venueImgUrl="",this.venueName="",this.venueUrl="",t&&(this.id=t.id,this.desc=t.desc,this.eventDate=t.eventDate,this.eventType=t.eventType,this.venueAddress=t.venueAddress,this.venueCity=t.venueCity,this.venueImgUrl=t.venueImgUrl,this.venueName=t.venueName,this.venueUrl=t.venueUrl)},B=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(i)))).state={gigs:[],gigToEdit:void 0,loading:!1},a.sortGigs=function(e){return e.sort(function(e,t){return e.eventDate>t.eventDate?-1:e.eventDate<t.eventDate?1:0})},a.handleEdit=function(e){a.setState(function(t){return Object(u.a)({},t,{gigToEdit:new H(e)})})},a.handleEditFieldChange=function(e,t){a.setState(function(a){return Object(u.a)({},a,{gigToEdit:Object(u.a)({},a.gigToEdit,Object(s.a)({},e,t))})})},a.getUpdateObject=function(e){return{id:e.id||null,desc:void 0!==e.desc&&""!==e.desc?e.desc:null,eventDate:e.eventDate,eventType:e.eventType,venueAddress:void 0!==e.venueAddress&&""!==e.venueAddress?e.venueAddress:null,venueCity:void 0!==e.venueCity&&""!==e.venueCity?e.venueCity:null,venueImgUrl:void 0!==e.venueImgUrl&&""!==e.venueImgUrl?e.venueImgUrl:null,venueName:e.venueName,venueUrl:void 0!==e.venueUrl&&""!==e.venueUrl?e.venueUrl:null}},a.handleEditSave=function(){var e=a.state.gigToEdit;if(e){var t=!1;if(!e.id){t=!0;var n=E.a.database().ref("/events").push();e.id=n.key||""}if(e.id){var i=a.getUpdateObject(e);E.a.database().ref("events/".concat(i.id)).update(i,function(n){a.setState(function(n){var i=n.gigs;return t?i.push(e):i=i.map(function(t){return t.id===e.id?e:t}),Object(u.a)({},n,{gigs:a.sortGigs(i),gigToEdit:void 0})})})}}},a.handleEditCancel=function(){a.setState({gigToEdit:void 0})},a.handleDelete=function(){if(a.state.gigToEdit){var e=a.state.gigToEdit,t=e.id,n=e.eventDate,i=e.venueName;e.venueCity;t&&confirm('Haluatko varmasti poistaa keikan "'.concat(n,": ").concat(i,'"?'))&&E.a.database().ref("/events/".concat(t)).remove().then(function(e){e||a.setState(function(e){var a=e.gigs.filter(function(e){return e.id!==t});return Object(u.a)({},e,{gigs:a,gigToEdit:void 0})})})}},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0},function(){E.a.database().ref("events").orderByChild("eventDate").once("value").then(function(t){var a=[];t.forEach(function(e){a.push(Object(u.a)({},e.val(),{id:e.key}))}),a=e.sortGigs(a),e.setState({gigs:a,loading:!1})})})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.gigs,o=a.gigToEdit,r=a.loading;return i.a.createElement("div",{className:t.root},i.a.createElement(I,{data:o,show:null!==o,onFieldChange:this.handleEditFieldChange,onSave:this.handleEditSave,onCancel:this.handleEditCancel,onDelete:this.handleDelete}),i.a.createElement(y.A,{className:t.title,variant:"subtitle1"},"Keikat yhteens\xe4 ",n.length," kpl"),i.a.createElement("div",{className:t.graph},i.a.createElement(P,{data:n})),i.a.createElement(y.c,{variant:"contained",onClick:function(){return e.handleEdit(new H)},className:t.addButton},"Lis\xe4\xe4 keikka"),r?i.a.createElement("div",{className:t.loadingContainer},i.a.createElement(y.d,null)):i.a.createElement(y.l,{component:"nav"},n.map(function(a){return i.a.createElement(y.m,{button:!0,key:a.id,onClick:function(){return e.handleEdit(a)}},i.a.createElement(y.b,{className:"e"===a.eventType.substr(0,1)?t.electricAvatar:""},a.eventType.substr(0,2).toUpperCase()),i.a.createElement(y.n,{primary:"".concat(a.eventDate,": ").concat(a.venueName),secondary:"".concat(a.venueCity)}),i.a.createElement(O.a,{className:t.openIcon}))})))}}]),t}(n.Component),M=Object(b.withStyles)(function(e){return{root:{},electricAvatar:{color:U.a[500],backgroundColor:N.a[900]},openIcon:{color:N.a[400]},addButton:{marginTop:2*e.spacing.unit,marginLeft:2*e.spacing.unit},loadingContainer:{marginTop:2*e.spacing.unit,marginLeft:2*e.spacing.unit},title:{padding:2*e.spacing.unit,paddingLeft:3*e.spacing.unit},graph:{height:"300px",width:"100%"}}},{withTheme:!0})(B),K=Object(b.withStyles)(function(e){return{root:{backgroundColor:e.palette.background.default}}})(function(e){var t=e.classes,a=e.show,n=e.data,o=e.onSave,r=e.onCancel,l=e.onFieldChange,c=e.onDelete;if(!n)return null;var s=null;return n.id&&(s=i.a.createElement(y.c,{variant:"text",color:"secondary",onClick:c},"Poista")),i.a.createElement(y.f,{PaperProps:{classes:{root:t.root}},open:a,fullScreen:!0,maxWidth:"sm"},i.a.createElement(y.i,null,"Suosituksen tiedot"),i.a.createElement(y.h,null,i.a.createElement(y.o,{elevation:1,style:{padding:"10px"}},i.a.createElement(y.y,{name:"quoter",label:"Suosittelija *",fullWidth:!0,value:n.quoter||"",onChange:function(e){return l(e.target.name,e.target.value)}}),i.a.createElement(y.y,{name:"timeAndPlace",label:"Miss\xe4 ja milloin",multiline:!0,rowsMax:3,fullWidth:!0,value:n.timeAndPlace||"",onChange:function(e){return l(e.target.name,e.target.value)}}),i.a.createElement(y.y,{name:"quote",label:"Suositusteksti *",multiline:!0,rowsMax:10,fullWidth:!0,value:n.quote||"",onChange:function(e){return l(e.target.name,e.target.value)}}))),i.a.createElement(y.g,null,s,i.a.createElement(y.c,{variant:"contained",color:"default",onClick:r},"Keskeyt\xe4"),i.a.createElement(y.c,{variant:"contained",color:"primary",onClick:o,disabled:""===n.quote||""===n.quoter},"Tallenna")))}),R=function e(t){Object(d.a)(this,e),this.id=void 0,this.quote="",this.quoter="",this.timeAndPlace="",t&&(this.id=t.id,this.quote=t.quote,this.quoter=t.quoter,this.timeAndPlace=t.timeAndPlace)},W=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(i)))).state={testimonials:[],testimonialToEdit:void 0,loading:!1},a.handleEdit=function(e){a.setState(function(t){return Object(u.a)({},t,{testimonialToEdit:new R(e)})})},a.handleEditFieldChange=function(e,t){a.setState(function(a){return Object(u.a)({},a,{testimonialToEdit:Object(u.a)({},a.testimonialToEdit,Object(s.a)({},e,t))})})},a.getUpdateObject=function(e){return{id:e.id||null,quote:e.quote,quoter:e.quoter,timeAndPlace:void 0!==e.timeAndPlace&&""!==e.timeAndPlace?e.timeAndPlace:null}},a.handleEditSave=function(){var e=a.state.testimonialToEdit;if(e){var t=!1;if(!e.id){t=!0;var n=E.a.database().ref("/testimonials").push();e.id=n.key||""}if(e.id){var i=a.getUpdateObject(e);E.a.database().ref("testimonials/".concat(i.id)).update(i,function(n){a.setState(function(a){var n=a.testimonials;return t?n.push(e):n=n.map(function(t){return t.id===e.id?e:t}),Object(u.a)({},a,{testimonials:n,testimonialToEdit:void 0})})})}}},a.handleEditCancel=function(){a.setState({testimonialToEdit:void 0})},a.handleDelete=function(){if(a.state.testimonialToEdit){var e=a.state.testimonialToEdit,t=e.id,n=e.quoter,i=e.timeAndPlace;t&&confirm('Haluatko varmasti poistaa suosituksen "'.concat(n,": ").concat(i,'"?'))&&E.a.database().ref("/testimonials/".concat(t)).remove().then(function(e){e||a.setState(function(e){var a=e.testimonials.filter(function(e){return e.id!==t});return Object(u.a)({},e,{testimonials:a,testimonialToEdit:void 0})})})}},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0},function(){E.a.database().ref("testimonials").orderByKey().once("value").then(function(t){var a=[];t.forEach(function(e){a.push(Object(u.a)({},e.val(),{id:e.key}))}),e.setState({testimonials:a,loading:!1})})})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.testimonials,o=a.testimonialToEdit,r=a.loading;return i.a.createElement("div",{className:t.root},i.a.createElement(K,{data:o,show:null!==o,onFieldChange:this.handleEditFieldChange,onSave:this.handleEditSave,onCancel:this.handleEditCancel,onDelete:this.handleDelete}),i.a.createElement(y.c,{variant:"contained",onClick:function(){return e.handleEdit(new R)},className:t.addButton},"Lis\xe4\xe4 suosittelu"),r?i.a.createElement("div",{className:t.loadingContainer},i.a.createElement(y.d,null)):i.a.createElement(y.l,{component:"nav"},n.map(function(a){return i.a.createElement(y.m,{button:!0,key:a.id,onClick:function(){return e.handleEdit(a)}},i.a.createElement(y.n,{primary:"".concat(a.quoter,": ").concat(a.timeAndPlace||""),secondary:a.quote}),i.a.createElement(O.a,{className:t.openIcon}))})))}}]),t}(n.Component),Y=Object(b.withStyles)(function(e){return{root:{},openIcon:{color:N.a[400]},addButton:{marginTop:2*e.spacing.unit,marginLeft:2*e.spacing.unit},loadingContainer:{marginTop:2*e.spacing.unit,marginLeft:2*e.spacing.unit},title:{padding:2*e.spacing.unit,paddingLeft:3*e.spacing.unit}}},{withTheme:!0})(W),V=Object(b.withStyles)(function(e){return{root:{maxWidth:"300px",paddingTop:5*e.spacing.unit,margin:"auto"},header:{padding:3*e.spacing.unit,backgroundColor:e.palette.grey[900],color:e.palette.common.white},paper:{padding:3*e.spacing.unit},actionButtons:{paddingTop:2*e.spacing.unit,display:"flex"},loginButton:{flex:1},siteButton:{flex:1}}},{withTheme:!0})(function(e){var t=e.classes,a=e.data,n=e.onFieldChange,o=e.onSignIn;return a?i.a.createElement("div",{className:t.root},i.a.createElement("div",{className:t.header},i.a.createElement("img",{src:A.a}),i.a.createElement(y.A,{color:"inherit",variant:"subtitle1"},"Admin sivusto")),i.a.createElement(y.o,{className:t.paper},i.a.createElement(y.y,{name:"email",label:"S\xe4hk\xf6posti",type:"email",fullWidth:!0,value:a.email||"",onChange:function(e){return n(e.target.name,e.target.value)}}),i.a.createElement(y.y,{name:"password",label:"Salasana",type:"password",fullWidth:!0,value:a.password||"",onChange:function(e){return n(e.target.name,e.target.value)}}),i.a.createElement(y.k,{container:!0,justify:"space-between",className:t.actionButtons},i.a.createElement(y.k,{item:!0},i.a.createElement(y.c,{className:t.loginButton,variant:"contained",color:"primary",onClick:o,disabled:""===a.email||""===a.password},"Kirjaudu")),i.a.createElement(y.k,{item:!0},i.a.createElement(y.c,{href:"https://heltterit.com",className:t.siteButton},"heltterit.com"))))):null}),F=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(i)))).state={signInData:{email:"",password:""},isSignedIn:!1,selectedTab:0},a.handleTabChange=function(e,t){a.setState({selectedTab:t})},a.handleSignInFieldChange=function(e,t){a.setState(function(a){return Object(u.a)({},a,{signInData:Object(u.a)({},a.signInData,Object(s.a)({},e,t))})})},a.handleSignIn=function(){var e=a.state.signInData,t=e.email,n=e.password;""!==t&&""!==n&&E.a.auth().signInWithEmailAndPassword(t,n).then(function(e){e&&a.setState({isSignedIn:!0})})},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;switch(E.a.auth().onAuthStateChanged(function(t){e.setState({isSignedIn:!!t})}),this.props.location.pathname){case"/gigs":this.setState({selectedTab:1});break;case"/testimonials":this.setState({selectedTab:2});break;default:this.setState({selectedTab:0})}}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.signInData,n=t.isSignedIn,o=t.selectedTab;if(!n)return i.a.createElement(V,{data:a,onFieldChange:this.handleSignInFieldChange,onSignIn:this.handleSignIn});return i.a.createElement("div",{className:e.root},i.a.createElement(y.e,null),i.a.createElement(y.a,{position:"sticky",className:e.appBar},i.a.createElement(y.z,{variant:"dense",color:"primary"},i.a.createElement("div",{className:e.grow},i.a.createElement("img",{src:A.a})),i.a.createElement(y.c,{color:"inherit",onClick:function(){return E.a.auth().signOut()}},"Ulos")),i.a.createElement(y.z,{variant:"dense"},i.a.createElement(y.x,{onChange:this.handleTabChange,value:o,centered:!0},i.a.createElement(y.r,{label:"K\xe4vij\xe4t",component:function(e){return i.a.createElement(p.a,Object.assign({to:"/"},e))}}),i.a.createElement(y.r,{label:"Keikat",component:function(e){return i.a.createElement(p.a,Object.assign({to:"/gigs"},e))}}),i.a.createElement(y.r,{label:"Suosittelut",component:function(e){return i.a.createElement(p.a,Object.assign({to:"/testimonials"},e))}})))),i.a.createElement("main",{className:e.content},i.a.createElement("div",{className:"appBarSpacer"}),i.a.createElement(c.a,{exact:!0,path:"/",component:j}),i.a.createElement(c.a,{path:"/gigs",component:M}),i.a.createElement(c.a,{path:"/testimonials",component:Y})),i.a.createElement("footer",null))}}]),t}(n.Component),J=Object(b.withStyles)(function(e){return{root:{},grow:{flexGrow:1},appBar:{},appBarSpacer:{minHeight:e.mixins.toolbar.height},content:{}}},{withTheme:!0})(F);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));E.a.initializeApp({apiKey:"AIzaSyAt7xOwh_NvvSXTbrYTusSjneKNtKeRhuw",authDomain:"heltterit.firebaseapp.com",databaseURL:"https://heltterit.firebaseio.com",projectId:"heltterit",storageBucket:"heltterit.appspot.com",messagingSenderId:"466981045601"});var z=Object(b.createMuiTheme)({palette:{primary:{light:"#888",main:"#000",dark:"#444",contrastText:"#B71C1C"}},typography:{useNextVariants:!0}});r.a.render(i.a.createElement(l.a,null,i.a.createElement(b.MuiThemeProvider,{theme:z},i.a.createElement(c.a,{path:"/",component:J}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[337,2,1]]]);
//# sourceMappingURL=main.40fab7db.chunk.js.map